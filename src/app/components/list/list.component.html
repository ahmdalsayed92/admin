<div class="p-20">
  <h1 class="text-[32px]">Websites That Has The Widget</h1>

  <!-- filter -->
  <div
    class="md:col-span-2 grid grid-cols-1 gap-x-6 gap-y-8 md:grid-cols-3 items-end mt-20 mb-7"
  >
    <div class="aegov-form-control">
      <label for="search_suffix">Search</label>
      <div class="form-control-input">
        <input
          type="search"
          name="search_suffix"
          id="search_suffix"
          placeholder="Search for something"
          [formControl]="searchControl"
        />
        <span class="control-suffix">
          <!-- Add your SVG icon here -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
            <rect width="256" height="256" fill="none" />
            <circle
              cx="112"
              cy="112"
              r="80"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="16"
            />
            <line
              x1="168.57"
              y1="168.57"
              x2="224"
              y2="224"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="16"
            />
          </svg>
        </span>
      </div>
    </div>
    <div class="aegov-form-control">
      <label for="opt1">Sort Websites By</label>
      <div class="form-control-input">
        <select
          id="opt1"
          name="opt1"
          [(ngModel)]="sortBy"
          (ngModelChange)="loadEntities()"
        >
          <option [value]="'title'">title</option>
          <option [value]="'domain'">domain</option>
        </select>
      </div>
    </div>
    <button
      class="aegov-btn justify-self-end"
      type="button"
      (click)="newWebsite()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="32"
        height="32"
        fill="#000000"
        viewBox="0 0 256 256"
      >
        <path
          d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"
        ></path>
      </svg>
      New website
    </button>
  </div>
  <p *ngIf="totalItemsNumber > 1">
    Showing {{ currentPage }} - {{ totalPages }} /
    {{ totalItemsNumber }} Results
  </p>
  <p *ngIf="totalItemsNumber == 0">No Results Found</p>
  <!-- result -->
  <!-- accordion  -->
  <div
    class="aegov-accordion [&_.accordion-active_svg]:rotate-180 mt-10"
    id="accordion-collapse"
    data-accordion="collapse"
  >
    <div
      class="accordion-item bg-slate-50 border-none rounded-lg pb-[1px] px-10"
      *ngFor="let item of searchResults; let i = index"
    >
      <div class="accordion-title" [id]="'aegov-accordion-head-' + i">
        <button type="button" aria-expanded="true" (click)="toggleAccordion(i)">
          <span class="flex-1 text-2xl"
            >{{ item.title }} <br /><span
              class="text-[16px] font-normal hidden"
            ></span
          ></span>
          <span
            class="status text-aeblack-800 relative text-[16px] font-normal"
            [class.active]="item.isActive"
            [class.inactive]="!item.isActive"
            >{{ item.isActive ? "Active" : "Deactivated" }}</span
          >
          <svg
            data-accordion-icon
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 256 256"
          >
            <rect width="256" height="256" fill="none" />
            <polyline
              points="208 96 128 176 48 96"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="16"
            />
          </svg>
        </button>
      </div>
      <div
        class="accordion-content"
        [class.hidden]="openIndex !== i"
        [id]="'#aegov-accordion-body-' + i"
        [attr.aria-labelledby]="'aegov-accordion-head-' + i"
      >
        <div class="accordion-content-body">
          <div class="flex justify-between items-start">
            <div>
              Base URL
              <div class="font-bold">{{ item.domain }}</div>
            </div>
            <div>
              Accessibility Officer
              <ul class="font-bold admins-list">
                <li *ngFor="let admin of item.admins; let i = index">
                  {{ admin.adminName }}
                </li>
              </ul>
            </div>
            <div>
              Last Used
              <div class="font-bold">
                {{ item.updatedAt | date : "medium" }}
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-content-body top-separator">
          <div class="flex justify-between items-start">
            <div class="w-1/2">
              <h3 class="text-xl mb-6">Assigned Pages</h3>
              <ul>
                <li
                  *ngFor="let page of item.pages"
                  class="underline py-3 font-normal"
                >
                  <a [href]="page.url">{{ page.title }}</a>
                </li>
              </ul>
            </div>

            <div class="w-1/2">
              <h3 class="text-xl mb-6">Widget Code</h3>
              <div class="flex justify-between">
                <div
                  class="flex items-start bg-aegold-50 rounded-lg py-4 px-6 space-x-2 w-[90%]"
                >
                  <!-- Code Block -->
                  <pre
                    class="whitespace-pre-wrap break-words text-wrap overflow-auto"
                  >
                        <code class="font-medium">
                            {{ widgetCode1 }}{{item.apiKey}}{{ widgetCode2 }}
                        </code>
                    </pre>

                  <!-- SVG Icon -->
                  <svg
                    width="22"
                    height="22"
                    viewBox="0 0 22 22"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-[10%] cursor-pointer"
                    (click)="copyCode(widgetCode1 + item.apiKey + widgetCode2)"
                  >
                    <path
                      d="M17.125 4H1.375C1.14294 4 0.920376 4.09219 0.756282 4.25628C0.592187 4.42038 0.5 4.64294 0.5 4.875V20.625C0.5 20.8571 0.592187 21.0796 0.756282 21.2437C0.920376 21.4078 1.14294 21.5 1.375 21.5H17.125C17.3571 21.5 17.5796 21.4078 17.7437 21.2437C17.9078 21.0796 18 20.8571 18 20.625V4.875C18 4.64294 17.9078 4.42038 17.7437 4.25628C17.5796 4.09219 17.3571 4 17.125 4ZM16.25 19.75H2.25V5.75H16.25V19.75ZM21.5 1.375V17.125C21.5 17.3571 21.4078 17.5796 21.2437 17.7437C21.0796 17.9078 20.8571 18 20.625 18C20.3929 18 20.1704 17.9078 20.0063 17.7437C19.8422 17.5796 19.75 17.3571 19.75 17.125V2.25H4.875C4.64294 2.25 4.42038 2.15781 4.25628 1.99372C4.09219 1.82962 4 1.60706 4 1.375C4 1.14294 4.09219 0.920376 4.25628 0.756282C4.42038 0.592187 4.64294 0.5 4.875 0.5H20.625C20.8571 0.5 21.0796 0.592187 21.2437 0.756282C21.4078 0.920376 21.5 1.14294 21.5 1.375Z"
                      fill="#92722A"
                    />
                  </svg>
                </div>
                <a
                  class="aegov-btn btn-icon btn-sm justify-self-end"
                  type="button"
                  aria-label="Email widget code"
                  href="mailto:{{
                    getAdminsEmails(i)
                  }}?subject=Widget Code&body={{ widgetCode1 }}{{
                    item.apiKey
                  }}{{ widgetCode2 }}"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="32"
                    height="32"
                    fill="#000000"
                    viewBox="0 0 256 256"
                  >
                    <path
                      d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"
                    ></path>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-content-body">
          <div class="flex gap-3">
            <div class="flex-1">
              <button
                class="aegov-btn btn-soft justify-self-end flex-1"
                type="button"
                (click)="deleteWidget(item)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  fill="#000000"
                  viewBox="0 0 256 256"
                >
                  <path
                    d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"
                  ></path>
                </svg>
                Delete
              </button>
            </div>

            <button
              class="aegov-btn btn-outline btn-secondary justify-self-end"
              type="button"
              (click)="editWebsite(item)"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                fill="#000000"
                viewBox="0 0 256 256"
              >
                <path
                  d="M226.76,69a8,8,0,0,0-12.84-2.88l-40.3,37.19-17.23-3.7-3.7-17.23,37.19-40.3A8,8,0,0,0,187,29.24,72,72,0,0,0,88,96,72.34,72.34,0,0,0,94,124.94L33.79,177c-.15.12-.29.26-.43.39a32,32,0,0,0,45.26,45.26c.13-.13.27-.28.39-.42L131.06,162A72,72,0,0,0,232,96,71.56,71.56,0,0,0,226.76,69ZM160,152a56.14,56.14,0,0,1-27.07-7,8,8,0,0,0-9.92,1.77L67.11,211.51a16,16,0,0,1-22.62-22.62L109.18,133a8,8,0,0,0,1.77-9.93,56,56,0,0,1,58.36-82.31l-31.2,33.81a8,8,0,0,0-1.94,7.1L141.83,108a8,8,0,0,0,6.14,6.14l26.35,5.66a8,8,0,0,0,7.1-1.94l33.81-31.2A56.06,56.06,0,0,1,160,152Z"
                ></path>
              </svg>
              Edit
            </button>
            <button
              class="aegov-btn btn-outline btn-secondary justify-self-end"
              type="button"
              (click)="toggleActivation(item)"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                fill="#000000"
                viewBox="0 0 256 256"
              >
                <path
                  d="M120,128V48a8,8,0,0,1,16,0v80a8,8,0,0,1-16,0Zm60.37-78.7a8,8,0,0,0-8.74,13.4C194.74,77.77,208,101.57,208,128a80,80,0,0,1-160,0c0-26.43,13.26-50.23,36.37-65.3a8,8,0,0,0-8.74-13.4C47.9,67.38,32,96.06,32,128a96,96,0,0,0,192,0C224,96.06,208.1,67.38,180.37,49.3Z"
                ></path>
              </svg>
              {{ !item.isActive ? "Active" : "Deactivate" }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- pagination  -->
  <div class="flex items-center justify-center mt-10" *ngIf="totalPages > 1">
    <!-- Code for Mobile Pagination -->
    <div
      class="aegov-pagination flex flex-1 justify-between items-center sm:hidden"
    >
      <a
        class="aegov-pagination-previous"
        (click)="prevPage(); $event.preventDefault()"
      >
        <svg
          aria-hidden="true"
          class="rtl:rotate-180"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
        >
          <rect width="256" height="256" fill="none" />
          <polyline
            points="160 208 80 128 160 48"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
        </svg>
        <span>Previous</span>
      </a>
      <span class="pages">Page 10 of 13</span>
      <a
        class="aegov-pagination-next"
        (click)="nextPage(); $event.preventDefault()"
      >
        <span>Next</span>
        <svg
          aria-hidden="true"
          class="rtl:rotate-180"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
        >
          <rect width="256" height="256" fill="none" />
          <polyline
            points="96 48 176 128 96 208"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
        </svg>
      </a>
    </div>
    <!-- Code for Desktop Pagination -->
    <div class="aegov-pagination max-sm:hidden" role="navigation">
      <a
        class="aegov-pagination-first"
        aria-label="First Page"
        (click)="firstPage(); $event.preventDefault()"
      >
        <svg
          aria-hidden="true"
          class="rtl:rotate-180"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
        >
          <rect width="256" height="256" fill="none" />
          <polyline
            points="200 208 120 128 200 48"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
          <polyline
            points="120 208 40 128 120 48"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
        </svg>
        <span>First</span>
      </a>
      <a
        class="aegov-pagination-previous"
        rel="prev"
        aria-label="Previous Page"
        href="#"
        (click)="prevPage(); $event.preventDefault()"
      >
        <svg
          aria-hidden="true"
          class="rtl:rotate-180"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
        >
          <rect width="256" height="256" fill="none" />
          <polyline
            points="160 208 80 128 160 48"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
        </svg>
        <span>Previous</span>
      </a>
      <a
        class="aegov-pagination-page aegov-pagination-smaller"
        [class.aegov-pagination-current]="page === currentPage"
        [title]="'Page' + page"
        href="#"
        (click)="goToPage(page); $event.preventDefault()"
        *ngFor="let page of pageNumbers"
        >{{ page }}</a
      >
      <a
        class="aegov-pagination-next"
        rel="next"
        aria-label="Next Page"
        href="#"
        (click)="nextPage(); $event.preventDefault()"
      >
        <span>Next</span>
        <svg
          aria-hidden="true"
          class="rtl:rotate-180"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
        >
          <rect width="256" height="256" fill="none" />
          <polyline
            points="96 48 176 128 96 208"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
        </svg>
      </a>
      <a
        class="aegov-pagination-last"
        aria-label="Last Page"
        href="#"
        (click)="lastPage(); $event.preventDefault()"
      >
        <span>Last</span>
        <svg
          aria-hidden="true"
          class="rtl:rotate-180"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
        >
          <rect width="256" height="256" fill="none" />
          <polyline
            points="56 48 136 128 56 208"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
          <polyline
            points="136 48 216 128 136 208"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          />
        </svg>
      </a>
    </div>
  </div>
</div>
